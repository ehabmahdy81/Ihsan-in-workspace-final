<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†Ø²Ù„ - Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #2C5F2D;
            --secondary: #97BC62;
            --accent: #E8B86D;
            --success: #28a745;
            --warning: #ffc107;
        }
        
        body {
            font-family: 'Segoe UI', 'Dubai', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            direction: rtl;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, #1a3a1b 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }
        
        /* Overall Progress */
        .overall-progress {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .progress-title {
            font-size: 1.5em;
            color: var(--primary);
            font-weight: bold;
        }
        
        .progress-stats {
            font-size: 1.3em;
            color: var(--accent);
            font-weight: bold;
        }
        
        .progress-bar-container {
            background: #e9ecef;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, var(--secondary) 0%, var(--primary) 100%);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        
        .progress-message {
            color: #718096;
            font-size: 1.1em;
            text-align: center;
        }
        
        /* Instructions */
        .instructions {
            background: linear-gradient(135deg, rgba(232, 184, 109, 0.1) 0%, rgba(151, 188, 98, 0.1) 100%);
            border-right: 5px solid var(--accent);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .instructions h3 {
            color: var(--primary);
            font-size: 1.4em;
            margin-bottom: 15px;
        }
        
        .instructions ul {
            list-style: none;
            padding: 0;
        }
        
        .instructions li {
            padding: 10px 0;
            padding-right: 30px;
            position: relative;
            color: #2d3748;
            line-height: 1.6;
            font-size: 1.05em;
        }
        
        .instructions li::before {
            content: 'âœ“';
            position: absolute;
            right: 0;
            color: var(--primary);
            font-weight: bold;
            font-size: 1.2em;
        }
        
        /* Manazil Grid */
        .manazil-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .manzil-card {
            background: white;
            border-radius: 20px;
            padding: 35px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
            text-decoration: none;
            display: block;
        }
        
        .manzil-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            border-color: var(--secondary);
        }
        
        .manzil-card.completed {
            border-color: var(--success);
            background: linear-gradient(135deg, rgba(40, 167, 69, 0.05) 0%, rgba(32, 201, 151, 0.05) 100%);
        }
        
        .manzil-card.in-progress {
            border-color: var(--warning);
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.05) 0%, rgba(253, 126, 20, 0.05) 100%);
        }
        
        .status-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }
        
        .status-badge.completed {
            background: var(--success);
            color: white;
        }
        
        .status-badge.in-progress {
            background: var(--warning);
            color: white;
        }
        
        .status-badge.not-started {
            background: #6c757d;
            color: white;
        }
        
        .manzil-icon {
            font-size: 4em;
            margin-bottom: 20px;
            display: block;
            text-align: center;
        }
        
        .manzil-name {
            font-size: 2em;
            color: var(--primary);
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }
        
        .manzil-description {
            color: #718096;
            line-height: 1.7;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.05em;
        }
        
        .manzil-stats {
            display: flex;
            justify-content: space-around;
            padding-top: 20px;
            border-top: 2px solid #e9ecef;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 1.8em;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stat-label {
            color: #718096;
            font-size: 0.95em;
            margin-top: 5px;
        }
        
        .reset-button {
            margin-top: 15px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .reset-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4);
        }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .action-button {
            background: linear-gradient(135deg, var(--primary) 0%, #1a3a1b 100%);
            color: white;
            padding: 18px 40px;
            border-radius: 30px;
            text-decoration: none;
            font-size: 1.2em;
            font-weight: bold;
            box-shadow: 0 5px 20px rgba(44, 95, 45, 0.3);
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .action-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(44, 95, 45, 0.5);
        }
        
        .action-button.secondary {
            background: linear-gradient(135deg, var(--accent) 0%, #d4a05d 100%);
        }
        
        .action-button.outline {
            background: white;
            color: var(--primary);
            border: 3px solid var(--primary);
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .manazil-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“‹ Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø²Ù„ Ù„Ù„ØªÙ‚ÙŠÙŠÙ…</h1>
            <p>ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø£ÙŠ Ù…Ù†Ø²Ù„ ÙˆØ­ÙØ¸ ØªÙ‚Ø¯Ù…Ùƒ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª</p>
        </div>

        <!-- Overall Progress -->
        <div class="overall-progress">
            <div class="progress-header">
                <div class="progress-title">ğŸ“Š ØªÙ‚Ø¯Ù…Ùƒ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
                <div class="progress-stats"><span id="completed-count">0</span> Ù…Ù† 7</div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="overall-progress-bar"></div>
            </div>
            <div class="progress-message" id="progress-message">
                Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø¨ØªÙ‚ÙŠÙŠÙ… Ø£ÙˆÙ„ Ù…Ù†Ø²Ù„
            </div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <h3>ğŸ“Œ ÙƒÙŠÙ ØªØ³ØªØ®Ø¯Ù… Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø±Ù†ØŸ</h3>
            <ul>
                <li>Ø§Ø®ØªØ± Ø£ÙŠ Ù…Ù†Ø²Ù„ Ù„Ù„Ø¨Ø¯Ø¡ - Ù„Ø§ ÙŠØ´ØªØ±Ø· Ø§Ù„ØªØ±ØªÙŠØ¨</li>
                <li>Ø£Ø¬Ø¨ Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù†Ø²Ù„ (5-7 Ø£Ø³Ø¦Ù„Ø© Ù„ÙƒÙ„ Ù…Ù†Ø²Ù„)</li>
                <li>Ø§Ø­ÙØ¸ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª ÙˆØ¹Ø¯ Ù„Ø§Ø­Ù‚Ø§Ù‹</li>
                <li>Ø¨Ø¹Ø¯ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø²Ù„ØŒ Ø´Ø§Ù‡Ø¯ Ù†ØªØ§Ø¦Ø¬Ùƒ Ø§Ù„Ø´Ø§Ù…Ù„Ø©</li>
                <li>ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‚ÙŠÙŠÙ… Ø£ÙŠ Ù…Ù†Ø²Ù„ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª</li>
            </ul>
        </div>

        <!-- Manazil Grid -->
        <div class="manazil-grid" id="manazil-grid"></div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="action-button" onclick="viewResults()" id="view-results-btn" style="display: none;">
                ğŸ“Š Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø´Ø§Ù…Ù„Ø©
            </button>
            <button class="action-button" onclick="resetAllProgress()" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);">
                ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            </button>
            <a href="index.html" class="action-button outline">
                ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            </a>
        </div>
    </div>

    <script>
        const manazilData = [
            {
                id: "taqwa",
                name: "Ø§Ù„ØªÙ‚ÙˆÙ‰",
                icon: "ğŸŒ™",
                description: "Ø§Ù„Ù†Ø²Ø§Ù‡Ø© ÙˆØ§Ù„Ø£Ù…Ø§Ù†Ø© ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ØŒ ØªØ¬Ù†Ø¨ Ø§Ù„Ù…Ø­Ø±Ù…Ø§Øª ÙˆØ§Ù„Ù…Ø´ØªØ¨Ù‡Ø§Øª",
                questionCount: 6
            },
            {
                id: "yaqeen",
                name: "Ø§Ù„ÙŠÙ‚ÙŠÙ†",
                icon: "âœ¨",
                description: "Ø§Ù„Ø«Ù‚Ø© Ø¨Ø§Ù„Ù„Ù‡ ÙˆØ§Ù„Ø·Ù…Ø£Ù†ÙŠÙ†Ø© Ø¨Ø´Ø£Ù† Ø§Ù„Ø±Ø²Ù‚ ÙˆØ§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù…Ù‡Ù†ÙŠ",
                questionCount: 6
            },
            {
                id: "tawakkul",
                name: "Ø§Ù„ØªÙˆÙƒÙ„",
                icon: "ğŸ¤²",
                description: "Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø¬ÙŠØ¯ Ù…Ø¹ Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ÙƒØ§Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ù„Ù‡",
                questionCount: 6
            },
            {
                id: "tasleem",
                name: "Ø§Ù„ØªØ³Ù„ÙŠÙ…",
                icon: "ğŸ•Šï¸",
                description: "Ø§Ù„Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ ÙˆØ§Ù„Ù…Ø±ÙˆÙ†Ø© Ù…Ø¹ Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„ØªØºÙŠÙŠØ±Ø§Øª",
                questionCount: 6
            },
            {
                id: "reda",
                name: "Ø§Ù„Ø±Ø¶Ø§",
                icon: "ğŸ˜Œ",
                description: "Ø§Ù„Ø§Ù…ØªÙ†Ø§Ù† Ù„Ù„Ù†Ø¹Ù… ÙˆØ±Ø¤ÙŠØ© Ø§Ù„Ø¨Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø¹Ù…Ù„",
                questionCount: 7
            },
            {
                id: "uboodiyah",
                name: "Ø§Ù„Ø¹Ø¨ÙˆØ¯ÙŠØ©",
                icon: "ğŸ™",
                description: "Ø§Ù„Ù†ÙŠØ© Ø§Ù„ØµØ§Ù„Ø­Ø© ÙˆØ§Ù„Ø¥Ø®Ù„Ø§ØµØŒ Ø±Ø¤ÙŠØ© Ø§Ù„Ø¹Ù…Ù„ ÙƒØ¹Ø¨Ø§Ø¯Ø©",
                questionCount: 7
            },
            {
                id: "mahabbah",
                name: "Ù…Ø­Ø¨Ø© Ø§Ù„Ù„Ù‡",
                icon: "â¤ï¸",
                description: "Ø§Ù„Ø­Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ‚ Ù„Ù„Ù‡ ÙˆØ§Ù„Ø´Ø¹ÙˆØ± Ø¨Ù…Ø¹ÙŠØªÙ‡ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„",
                questionCount: 7
            }
        ];

        function getAssessmentProgress() {
            const saved = localStorage.getItem('ihsan_manzil_progress');
            return saved ? JSON.parse(saved) : {};
        }

        function getManzilStatus(manzilId, progress) {
            if (!progress[manzilId]) return 'not-started';
            if (progress[manzilId].completed) return 'completed';
            if (progress[manzilId].answers && Object.keys(progress[manzilId].answers).length > 0) {
                return 'in-progress';
            }
            return 'not-started';
        }

        function getStatusText(status) {
            const statusMap = {
                'completed': 'âœ“ Ù…ÙƒØªÙ…Ù„',
                'in-progress': 'â³ Ø¬Ø§Ø±ÙŠ',
                'not-started': 'Ù„Ù… ÙŠØ¨Ø¯Ø£'
            };
            return statusMap[status];
        }

        function renderManazil() {
            const container = document.getElementById('manazil-grid');
            const progress = getAssessmentProgress();
            
            let completedCount = 0;
            
            const html = manazilData.map(manzil => {
                const status = getManzilStatus(manzil.id, progress);
                const answeredCount = progress[manzil.id]?.answers ? 
                    Object.keys(progress[manzil.id].answers).length : 0;
                
                if (status === 'completed') completedCount++;
                
                const showResetButton = status === 'completed' || status === 'in-progress';
                
                return `
                    <div class="manzil-card ${status}" style="pointer-events: none;">
                        <span class="status-badge ${status}">${getStatusText(status)}</span>
                        <div class="manzil-icon">${manzil.icon}</div>
                        <div class="manzil-name">${manzil.name}</div>
                        <div class="manzil-description">${manzil.description}</div>
                        <div class="manzil-stats">
                            <div class="stat-item">
                                <div class="stat-number">${answeredCount}/${manzil.questionCount}</div>
                                <div class="stat-label">Ø£Ø³Ø¦Ù„Ø© Ù…Ø¬Ø§Ø¨Ø©</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number">${manzil.questionCount}</div>
                                <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</div>
                            </div>
                        </div>
                        <div style="margin-top: 15px; pointer-events: auto;">
                            <a href="assessment.html?manzil=${manzil.id}" 
                               style="display: inline-block; padding: 12px 30px; background: linear-gradient(135deg, var(--primary) 0%, #1a3a1b 100%); color: white; border-radius: 25px; text-decoration: none; font-weight: bold; width: 100%; text-align: center; box-sizing: border-box;">
                                ${status === 'completed' ? 'âœï¸ Ù…Ø±Ø§Ø¬Ø¹Ø©' : status === 'in-progress' ? 'â–¶ï¸ Ù…ØªØ§Ø¨Ø¹Ø©' : 'â–¶ï¸ Ø§Ø¨Ø¯Ø£'}
                            </a>
                            ${showResetButton ? `
                                <button onclick="resetManzil('${manzil.id}', event)" class="reset-button">
                                    ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
            
            container.innerHTML = html;
            
            // Update overall progress
            const progressPercent = (completedCount / manazilData.length) * 100;
            document.getElementById('overall-progress-bar').style.width = progressPercent + '%';
            document.getElementById('completed-count').textContent = completedCount;
            
            // Update message
            const messageEl = document.getElementById('progress-message');
            if (completedCount === 0) {
                messageEl.textContent = 'Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø¨ØªÙ‚ÙŠÙŠÙ… Ø£ÙˆÙ„ Ù…Ù†Ø²Ù„';
            } else if (completedCount === manazilData.length) {
                messageEl.textContent = 'ğŸ‰ Ù…Ø¨Ø§Ø±Ùƒ! Ø£ÙƒÙ…Ù„Øª ØªÙ‚ÙŠÙŠÙ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø²Ù„';
                document.getElementById('view-results-btn').style.display = 'inline-block';
            } else {
                messageEl.textContent = `Ø±Ø§Ø¦Ø¹! Ø£ÙƒÙ…Ù„Øª ${completedCount} Ù…Ù† ${manazilData.length} Ù…Ù†Ø§Ø²Ù„. ÙˆØ§ØµÙ„ Ø§Ù„ØªÙ‚Ø¯Ù…!`;
            }
        }

        function viewResults() {
            window.location.href = 'dashboard.html';
        }

        function resetManzil(manzilId, event) {
            event.preventDefault();
            event.stopPropagation();
            
            const manzilName = manazilData.find(m => m.id === manzilId)?.name || 'Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø²Ù„';
            
            if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‚ÙŠÙŠÙ… ${manzilName}ØŸ\n\nØ³ÙŠØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©.`)) {
                const progress = getAssessmentProgress();
                
                // Delete the manzil data
                delete progress[manzilId];
                
                // Save back to localStorage
                localStorage.setItem('ihsan_manzil_progress', JSON.stringify(progress));
                
                // Reload the page
                renderManazil();
                
                // Show success message
                alert(`ØªÙ… Ù…Ø³Ø­ Ø¥Ø¬Ø§Ø¨Ø§Øª ${manzilName} Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯.`);
            }
        }

        function resetAllProgress() {
            if (confirm('âš ï¸ ØªØ­Ø°ÙŠØ±!\n\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯ØŸ\n\nØ³ÙŠØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø²Ù„ Ø§Ù„Ø³Ø¨Ø¹Ø© ÙˆÙ„Ù† ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ±Ø¬Ø§Ø¹Ù‡Ø§.')) {
                if (confirm('ØªØ£ÙƒÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠ: Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ØŸ')) {
                    // Clear all progress
                    localStorage.removeItem('ihsan_manzil_progress');
                    
                    // Reload the page
                    renderManazil();
                    
                    // Show success message
                    alert('âœ… ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ù†Ø¬Ø§Ø­!\n\nÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯ Ø§Ù„Ø¢Ù†.');
                }
            }
        }

        window.onload = renderManazil;
    </script>
</body>
</html>
